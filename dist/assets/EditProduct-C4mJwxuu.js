import{b as x,u as h,r as c,j as e}from"./index-B2A0ZtH7.js";import{d as f}from"./produk-l1NCuu3o.js";function k(){const{id:m}=x(),d=h(),l=c.useRef(null),t=f.find(n=>n.id.toString()===m),[a,i]=c.useState({name:"",price:"",stock:"",category:"",image:"",newImageFile:null});c.useEffect(()=>{t&&i({name:t.name,price:t.price,stock:t.stock,category:t.category,image:t.image,newImageFile:null})},[t]);const s=n=>{const{name:r,value:o}=n.target;i(b=>({...b,[r]:o}))},u=n=>{const r=n.target.files[0];r&&r.type==="image/png"?i(o=>({...o,newImageFile:r})):alert("Hanya file PNG yang diperbolehkan")},p=n=>{n.preventDefault();const r={...t,name:a.name,price:parseInt(a.price),stock:parseInt(a.stock),category:a.category,image:a.newImageFile?URL.createObjectURL(a.newImageFile):a.image};console.log("Produk berhasil diupdate:",r),d("/produk")},g=()=>{l.current&&l.current.click()};return t?e.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-white rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Edit Produk"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Nama Produk"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:s,className:"w-full border px-4 py-2 rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Harga"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:s,className:"w-full border px-4 py-2 rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Stok"}),e.jsx("input",{type:"number",name:"stock",value:a.stock,onChange:s,className:"w-full border px-4 py-2 rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Kategori"}),e.jsx("input",{type:"text",name:"category",value:a.category,onChange:s,className:"w-full border px-4 py-2 rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Gambar Saat Ini"}),e.jsx("img",{src:a.image,alt:"Preview",className:"w-32 h-32 object-cover rounded-md mb-2"}),e.jsx("button",{type:"button",onClick:g,className:"bg-orange-500 hover:bg-orange-600 text-white px-3 py-2 rounded-md",children:"Pilih Gambar PNG"}),e.jsx("input",{type:"file",accept:"image/png",ref:l,onChange:u,style:{display:"none"}}),a.newImageFile&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Preview Gambar Baru:"}),e.jsx("img",{src:URL.createObjectURL(a.newImageFile),alt:"Baru",className:"w-32 h-32 object-cover rounded-md"})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"Simpan Perubahan"}),e.jsx("button",{type:"button",onClick:()=>d("/produk"),className:"ml-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md",children:"Batal"})]})]}):e.jsx("div",{className:"p-6",children:"Produk tidak ditemukan"})}export{k as default};
