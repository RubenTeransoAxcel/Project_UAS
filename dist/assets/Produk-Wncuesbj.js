import{r as t,u as G,j as e,L as M}from"./index-B2A0ZtH7.js";import{M as T}from"./index-fse2SJR6.js";import{a as H}from"./index-BaV51HRC.js";import{b as _,E as B}from"./EmptyState-BFvOHbsS.js";import{P as O}from"./PageHeader-CLDTk3jO.js";import{P as R}from"./Pagination-CMM54X9j.js";import{A as q,L as J}from"./LoadingSpinner-A245_0JZ.js";import{p as m}from"./produkAPI-CTgvqS_5.js";import"./iconBase-GOSsFjr7.js";import"./index-B8JxVmVg.js";import"./index-C0RmN517.js";function se(){const[b,w]=t.useState([]),[j,f]=t.useState(!0),[u,n]=t.useState(null),[s,x]=t.useState({name:"",price:"",stock:"",kategori:"",deskripsi:"",ingredients:"",usage:"",nama_brand:"",negara:"",founded:"",weight:"",gambar:""}),[i,k]=t.useState(null),[N,C]=t.useState(1),[c,P]=t.useState(10),[o,S]=t.useState(""),[h,L]=t.useState("");G();const y=["styling","perawatan","alat","pembersih"],g=async()=>{try{f(!0);const a=await m.fetchProduk();w(a)}catch{n({type:"error",message:"Gagal mengambil data produk."})}finally{f(!1)}};t.useEffect(()=>{g()},[]);const r=a=>{const{name:l,value:d}=a.target;x(F=>({...F,[l]:d}))},D=async a=>{if(a.preventDefault(),["name","price","stock","kategori","deskripsi","gambar"].some(d=>!s[d])){n({type:"error",message:"Field wajib tidak boleh kosong."});return}try{i?(await m.updateProduk(i,s),n({type:"success",message:"Produk berhasil diperbarui."}),k(null)):(await m.createProduk(s),n({type:"success",message:"Produk berhasil ditambahkan."})),x({name:"",price:"",stock:"",kategori:"",deskripsi:"",ingredients:"",usage:"",nama_brand:"",negara:"",founded:"",weight:"",gambar:""}),g()}catch{n({type:"error",message:"Gagal menyimpan data."})}},E=a=>{const l=b.find(d=>d.id===a);l&&(x(l),k(a))},I=async a=>{if(confirm("Hapus produk ini?"))try{await m.deleteProduk(a),n({type:"success",message:"Produk berhasil dihapus."}),g()}catch{n({type:"error",message:"Gagal menghapus data."})}},p=b.filter(a=>{const l=a.name.toLowerCase().includes(o.toLowerCase())||a.nama_brand.toLowerCase().includes(o.toLowerCase())||a.negara.toLowerCase().includes(o.toLowerCase())||a.price.toString().includes(o),d=h?a.kategori===h:!0;return l&&d}),v=(N-1)*c,A=p.slice(v,v+c),K=Math.ceil(p.length/c);return e.jsxs("div",{className:"w-full",children:[e.jsx(O,{title:"Manajemen Produk",breadcrumb:["Dashboard","Produk"]}),e.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-md p-6 max-w-5xl mx-auto mb-10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:i?"Edit Produk":"Tambah Produk"}),u&&e.jsx(q,{type:u.type,children:u.message}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Nama Produk"}),e.jsx("input",{name:"name",placeholder:"Contoh: Hair Wax Matte",value:s.name,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Harga"}),e.jsx("input",{name:"price",placeholder:"Contoh: 25000",value:s.price,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Stok"}),e.jsx("input",{name:"stock",placeholder:"Jumlah stok tersedia",value:s.stock,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Kategori"}),e.jsxs("select",{name:"kategori",value:s.kategori,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1",children:[e.jsx("option",{value:"",children:"Pilih Kategori"}),y.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Nama Brand"}),e.jsx("input",{name:"nama_brand",placeholder:"Contoh: Gatsby, PomadeX",value:s.nama_brand,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Negara Asal"}),e.jsx("input",{name:"negara",placeholder:"Contoh: Jepang, Indonesia",value:s.negara,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Tahun Didirikan"}),e.jsx("input",{name:"founded",placeholder:"Contoh: 2012",value:s.founded,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Berat Produk"}),e.jsx("input",{name:"weight",placeholder:"Contoh: 100ml atau 200gr",value:s.weight,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Link Gambar Produk"}),e.jsx("input",{name:"gambar",placeholder:"URL gambar produk",value:s.gambar,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Deskripsi"}),e.jsx("textarea",{name:"deskripsi",placeholder:"Deskripsi produk secara umum",value:s.deskripsi,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Ingredients"}),e.jsx("textarea",{name:"ingredients",placeholder:"Bahan-bahan produk jika ada",value:s.ingredients,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Cara Pakai"}),e.jsx("textarea",{name:"usage",placeholder:"Panduan pemakaian produk",value:s.usage,onChange:r,className:"w-full p-2 bg-gray-50 border rounded-xl mt-1"})]}),e.jsx("button",{type:"submit",className:"bg-coklat hover:bg-coklat2 text-white px-6 py-2 rounded-xl shadow mt-4",children:i?"Update":"Tambah"})]})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-md p-6 max-w-6xl mx-auto",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Daftar Produk"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Cari berdasarkan nama, brand, negara, atau harga...",value:o,onChange:a=>S(a.target.value),className:"w-full md:w-2/3 px-4 py-2 border rounded-xl bg-gray-50"}),e.jsxs("select",{value:h,onChange:a=>L(a.target.value),className:"w-full md:w-1/3 px-4 py-2 border rounded-xl bg-gray-50",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),y.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),j?e.jsx(J,{text:"Memuat data produk..."}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 border-b",children:"Gambar"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Harga"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Stok"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Kategori"}),e.jsx("th",{className:"px-6 py-3 border-b text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:A.map((a,l)=>e.jsxs("tr",{className:`hover:bg-gray-50 ${l%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-3 border-b",children:e.jsx("img",{src:a.gambar,alt:a.name,className:"w-10 h-10 rounded-full object-cover"})}),e.jsx("td",{className:"px-6 py-3 border-b",children:a.name}),e.jsx("td",{className:"px-6 py-3 border-b",children:Number(a.price).toLocaleString("id-ID",{style:"currency",currency:"IDR"})}),e.jsx("td",{className:"px-6 py-3 border-b",children:a.stock}),e.jsx("td",{className:"px-6 py-3 border-b",children:a.kategori}),e.jsx("td",{className:"px-6 py-3 border-b text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>E(a.id),className:"hover:bg-orange-100 rounded-full p-2",children:e.jsx(H,{className:"text-orange-500 text-xl"})}),e.jsx(M,{to:`/produk/${a.id}`,className:"hover:bg-blue-100 rounded-full p-2",children:e.jsx(_,{className:"text-blue-500 text-xl"})}),e.jsx("button",{onClick:()=>I(a.id),className:"hover:bg-red-100 rounded-full p-2",children:e.jsx(T,{className:"text-red-500 text-xl"})})]})})]},a.id))})]}),!j&&p.length===0&&e.jsx(B,{text:"Tidak ada produk ditemukan."})]}),e.jsx(R,{currentPage:N,totalPages:K,onPageChange:C,itemsPerPage:c,onPageSizeChange:P})]})]})}export{se as default};
