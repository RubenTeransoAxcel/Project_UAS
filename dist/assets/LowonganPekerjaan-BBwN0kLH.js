import{r as o,j as e}from"./index-B2A0ZtH7.js";import{A as S,a as D,E as N}from"./EmptyState-BFvOHbsS.js";import{d as _}from"./dayjs.min-kvt7zhB0.js";import{a as p}from"./index-C0RmN517.js";import{A as C,L as A}from"./LoadingSpinner-A245_0JZ.js";import"./iconBase-GOSsFjr7.js";import"./index-B8JxVmVg.js";const h="https://txhxqrwzwgivxvvnwpnk.supabase.co/rest/v1/lowongan_pekerjaan",v="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR4aHhxcnd6d2dpdnh2dm53cG5rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkyODQ5NDIsImV4cCI6MjA2NDg2MDk0Mn0.QgAyKR-P6khZsSWtG5Su1UOMPqS5piCqZ7WT5mAh4TY",x={apikey:v,Authorization:`Bearer ${v}`,"Content-Type":"application/json"},m={async fetchLowongan(){return(await p.get(h,{headers:x})).data},async createLowongan(n){return(await p.post(h,n,{headers:x})).data},async deleteLowongan(n){await p.delete(`${h}?id=eq.${n}`,{headers:x})},async updateLowongan(n,i){return(await p.patch(`${h}?id=eq.${n}`,i,{headers:x})).data}},F=()=>{const[n,i]=o.useState([]),[u,E]=o.useState(""),[t,g]=o.useState({judul_lowongan:"",posisi:"",syarat:"",email_hrd:"",no_telpon_hrd:""}),[c,j]=o.useState(null),[b,f]=o.useState(!0),[y,r]=o.useState(null),w=async()=>{try{f(!0);const a=await m.fetchLowongan();i(a)}catch{r({type:"error",message:"Gagal mengambil data lowongan."})}finally{f(!1)}};o.useEffect(()=>{w()},[]);const d=a=>{const{name:s,value:l}=a.target;g({...t,[s]:l})},L=async a=>{if(a.preventDefault(),["judul_lowongan","posisi","syarat","email_hrd","no_telpon_hrd"].some(l=>!t[l])){r({type:"error",message:"Semua field wajib diisi."});return}try{c?(await m.updateLowongan(c,t),r({type:"success",message:"Lowongan berhasil diperbarui."}),j(null)):(await m.createLowongan(t),r({type:"success",message:"Lowongan berhasil ditambahkan."})),g({judul_lowongan:"",posisi:"",syarat:"",email_hrd:"",no_telpon_hrd:""}),w()}catch{r({type:"error",message:"Gagal menyimpan data."})}},I=a=>{const s=n.find(l=>l.id===a);s&&(g({judul_lowongan:s.judul_lowongan,posisi:s.posisi,syarat:s.syarat,email_hrd:s.email_hrd,no_telpon_hrd:s.no_telpon_hrd}),j(a))},k=async a=>{if(window.confirm("Hapus lowongan ini?"))try{await m.deleteLowongan(a),r({type:"success",message:"Lowongan berhasil dihapus."}),w()}catch{r({type:"error",message:"Gagal menghapus lowongan."})}};return e.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-md p-6 mb-10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Lowongan":"Tambah Lowongan"}),y&&e.jsx(C,{type:y.type,children:y.message}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"judul_lowongan",placeholder:"Judul Lowongan",value:t.judul_lowongan,onChange:d,className:"w-full p-2 bg-gray-50 border rounded-xl"}),e.jsx("input",{type:"text",name:"posisi",placeholder:"Posisi",value:t.posisi,onChange:d,className:"w-full p-2 bg-gray-50 border rounded-xl"}),e.jsx("textarea",{name:"syarat",placeholder:"Syarat",value:t.syarat,onChange:d,rows:3,className:"w-full p-2 bg-gray-50 border rounded-xl"}),e.jsx("input",{type:"email",name:"email_hrd",placeholder:"Email HRD",value:t.email_hrd,onChange:d,className:"w-full p-2 bg-gray-50 border rounded-xl"}),e.jsx("input",{type:"text",name:"no_telpon_hrd",placeholder:"No Telepon HRD",value:t.no_telpon_hrd,onChange:d,className:"w-full p-2 bg-gray-50 border rounded-xl"}),e.jsx("button",{type:"submit",className:"bg-coklat hover:bg-coklat2 text-white px-6 py-2 rounded-xl shadow cursor-pointer",children:c?"Update":"Tambah"})]})]}),e.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Daftar Lowongan"}),b?e.jsx(A,{text:"Memuat data lowongan..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 border-b",children:"Judul"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Posisi"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Syarat"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Email HRD"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Telp HRD"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Tanggal Publikasi"}),e.jsx("th",{className:"px-6 py-3 border-b text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:n.map(a=>{var s;return e.jsxs("tr",{className:"hover:bg-gray-50 text-sm text-gray-700",children:[e.jsx("td",{className:"px-6 py-4 border-b",children:a.judul_lowongan}),e.jsx("td",{className:"px-6 py-4 border-b",children:a.posisi}),e.jsx("td",{className:"px-6 py-4 border-b",children:((s=a.syarat)==null?void 0:s.length)>50?a.syarat.substring(0,50)+"...":a.syarat}),e.jsx("td",{className:"px-6 py-4 border-b",children:a.email_hrd}),e.jsx("td",{className:"px-6 py-4 border-b",children:a.no_telpon_hrd}),e.jsx("td",{className:"px-6 py-4 border-b",children:_(a.tanggal_publikasi).isValid()?_(a.tanggal_publikasi).format("DD MMM YYYY"):"Tanggal tidak valid"}),e.jsx("td",{className:"px-6 py-4 border-b text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>I(a.id),className:"hover:bg-orange-100 rounded-full p-2",children:e.jsx(S,{className:"text-orange-500 text-xl cursor-pointer"})}),e.jsx("button",{onClick:()=>k(a.id),className:"hover:bg-red-100 rounded-full p-2",children:e.jsx(D,{className:"text-red-500 text-xl cursor-pointer"})})]})})]},a.id)})})]})}),!b&&n.length===0&&!u&&e.jsx(N,{text:"Belum ada daftar data lowongan pekerjaan dibuka!"}),!b&&n.length===0&&u&&e.jsx(N,{text:"Terjadi Kesalahan. Coba lagi nanti."})]})]})};export{F as default};
