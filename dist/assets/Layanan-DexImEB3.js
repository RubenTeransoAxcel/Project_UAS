import{r as l,j as a}from"./index-B2A0ZtH7.js";import{A as S,a as A,E as N}from"./EmptyState-BFvOHbsS.js";import{a as d}from"./index-C0RmN517.js";import{A as C,L as D}from"./LoadingSpinner-A245_0JZ.js";import"./iconBase-GOSsFjr7.js";import"./index-B8JxVmVg.js";const m="https://txhxqrwzwgivxvvnwpnk.supabase.co/rest/v1/layanan",I="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR4aHhxcnd6d2dpdnh2dm53cG5rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkyODQ5NDIsImV4cCI6MjA2NDg2MDk0Mn0.QgAyKR-P6khZsSWtG5Su1UOMPqS5piCqZ7WT5mAh4TY",p={apikey:I,Authorization:`Bearer ${I}`,"Content-Type":"application/json"},h={async fetchLowongan(){return(await d.get(m,{headers:p})).data},async createLowongan(s){return(await d.post(m,s,{headers:p})).data},async deleteLowongan(s){await d.delete(`${m}?id=eq.${s}`,{headers:p})},async updateLowongan(s,o){return(await d.patch(`${m}?id=eq.${s}`,o,{headers:p})).data}},G=()=>{const[s,o]=l.useState([]),[x,E]=l.useState(""),[n,u]=l.useState({nama_paket:"",rincian:"",harga:""}),[c,w]=l.useState(null),[g,f]=l.useState(!0),[y,r]=l.useState(null),b=async()=>{try{f(!0);const e=await h.fetchLowongan();o(e)}catch{r({type:"error",message:"Gagal mengambil data layanan."})}finally{f(!1)}};l.useEffect(()=>{b()},[]);const j=e=>{const{name:t,value:i}=e.target;u({...n,[t]:i})},k=async e=>{if(e.preventDefault(),["nama_paket","rincian","harga"].some(i=>!n[i])){r({type:"error",message:"Semua field wajib diisi."});return}try{c?(await h.updateLowongan(c,n),r({type:"success",message:"Layanan berhasil diperbarui."}),w(null)):(await h.createLowongan(n),r({type:"success",message:"Layanan berhasil ditambahkan."})),u({nama_paket:"",rincian:"",harga:""}),b()}catch{r({type:"error",message:"Gagal menyimpan data."})}},L=e=>{const t=s.find(i=>i.id===e);t&&(u({nama_paket:t.nama_paket,rincian:t.rincian,harga:t.harga}),w(e))},v=async e=>{if(window.confirm("Hapus layanan ini?"))try{await h.deleteLowongan(e),r({type:"success",message:"Layanan berhasil dihapus."}),b()}catch{r({type:"error",message:"Gagal menghapus layanan."})}};return a.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[a.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-md p-6 mb-10",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Layanan":"Tambah Layanan"}),y&&a.jsx(C,{type:y.type,children:y.message}),a.jsxs("form",{onSubmit:k,className:"space-y-4",children:[a.jsx("input",{type:"text",name:"nama_paket",placeholder:"Nama Paket",value:n.nama_paket,onChange:j,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("textarea",{name:"rincian",placeholder:"Rincian",value:n.rincian,onChange:j,rows:3,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("input",{type:"number",name:"harga",placeholder:"Harga",value:n.harga,onChange:j,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("button",{type:"submit",className:"bg-coklat hover:bg-coklat2 text-white px-6 py-2 rounded-xl shadow cursor-pointer",children:c?"Update":"Tambah"})]})]}),a.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow-md p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Daftar Layanan"}),g?a.jsx(D,{text:"Memuat data layanan..."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-700 text-sm",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 border-b",children:"Nama Paket"}),a.jsx("th",{className:"px-6 py-3 border-b",children:"Rincian"}),a.jsx("th",{className:"px-6 py-3 border-b",children:"Harga"}),a.jsx("th",{className:"px-6 py-3 border-b text-center",children:"Aksi"})]})}),a.jsx("tbody",{children:s.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm text-gray-700",children:[a.jsx("td",{className:"px-6 py-4 border-b",children:e.nama_paket}),a.jsx("td",{className:"px-6 py-4 border-b",children:e.rincian}),a.jsx("td",{className:"px-6 py-4 border-b",children:Number(e.harga).toLocaleString("id-ID",{style:"currency",currency:"IDR"})}),a.jsx("td",{className:"px-6 py-4 border-b text-center",children:a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>L(e.id),className:"hover:bg-orange-100 rounded-full p-2",children:a.jsx(S,{className:"text-orange-500 text-xl cursor-pointer"})}),a.jsx("button",{onClick:()=>v(e.id),className:"hover:bg-red-100 rounded-full p-2",children:a.jsx(A,{className:"text-red-500 text-xl cursor-pointer"})})]})})]},e.id))})]})}),!g&&s.length===0&&!x&&a.jsx(N,{text:"Belum ada layanan tersedia."}),!g&&s.length===0&&x&&a.jsx(N,{text:"Terjadi Kesalahan. Coba lagi nanti."})]})]})};export{G as default};
