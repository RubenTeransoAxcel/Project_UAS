import{r,u as K,j as a,L as M}from"./index-B2A0ZtH7.js";import{M as A}from"./index-fse2SJR6.js";import{a as F}from"./index-BaV51HRC.js";import{b as I,E as L}from"./EmptyState-BFvOHbsS.js";import{d as f}from"./dayjs.min-kvt7zhB0.js";import{P as Y}from"./PageHeader-CLDTk3jO.js";import{P as B}from"./Pagination-CMM54X9j.js";import{A as G,L as T}from"./LoadingSpinner-A245_0JZ.js";import{k as c}from"./karyawanAPI-DrHISGP1.js";import"./iconBase-GOSsFjr7.js";import"./index-B8JxVmVg.js";import"./index-C0RmN517.js";function X(){const[d,N]=r.useState([]),[u,p]=r.useState(!0),[x,l]=r.useState(null),[s,h]=r.useState({name:"",email:"",phone:"",alamat:"",jabatan:"",foto:""}),[i,g]=r.useState(null),[y,w]=r.useState(1),[m,v]=r.useState(10);K();const b=async()=>{try{p(!0);const e=await c.fetchKaryawan();N(e)}catch{l({type:"error",message:"Gagal mengambil data karyawan."})}finally{p(!1)}};r.useEffect(()=>{b()},[]);const n=e=>{const{name:t,value:o}=e.target;h(E=>({...E,[t]:o}))},k=async e=>{if(e.preventDefault(),["name","email","phone","alamat","jabatan","foto"].some(o=>!s[o])){l({type:"error",message:"Semua field wajib diisi."});return}try{i?(await c.updateKaryawan(i,s),l({type:"success",message:"Data berhasil diperbarui."}),g(null)):(await c.createKaryawan(s),l({type:"success",message:"Data berhasil ditambahkan."})),h({name:"",email:"",phone:"",alamat:"",jabatan:"",foto:""}),b()}catch{l({type:"error",message:"Gagal menyimpan data."})}},P=e=>{const t=d.find(o=>o.id===e);t&&(h({name:t.name,email:t.email,phone:t.phone,alamat:t.alamat,jabatan:t.jabatan,foto:t.foto}),g(e))},S=async e=>{if(confirm("Hapus data karyawan?"))try{await c.deleteKaryawan(e),l({type:"success",message:"Data berhasil dihapus."}),b()}catch{l({type:"error",message:"Gagal menghapus data."})}},j=(y-1)*m,C=d.slice(j,j+m),D=Math.ceil(d.length/m);return a.jsxs("div",{className:"w-full",children:[a.jsx(Y,{title:"Karyawan Barber",breadcrumb:["Dashboard","Karyawan"]}),a.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-md p-6 max-w-4xl mx-auto mb-10",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:i?"Edit Karyawan":"Tambah Karyawan"}),x&&a.jsx(G,{type:x.type,children:x.message}),a.jsxs("form",{onSubmit:k,className:"space-y-4",children:[a.jsx("input",{name:"name",placeholder:"Nama",value:s.name,onChange:n,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("input",{name:"email",placeholder:"Email",value:s.email,onChange:n,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("input",{name:"phone",placeholder:"Phone",value:s.phone,onChange:n,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("input",{name:"alamat",placeholder:"Alamat",value:s.alamat,onChange:n,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("input",{name:"jabatan",placeholder:"Jabatan",value:s.jabatan,onChange:n,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("input",{name:"foto",placeholder:"Masukkan link foto anda",value:s.foto,onChange:n,className:"w-full p-2 bg-gray-50 border rounded-xl"}),a.jsx("button",{type:"submit",className:"bg-coklat hover:bg-coklat2 text-white px-6 py-2 rounded-xl shadow",children:i?"Update":"Tambah"})]})]}),a.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-md p-6 max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Daftar Karyawan"}),u?a.jsx(T,{text:"Memuat data karyawan..."}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-700 text-sm",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 border-b",children:"Foto"}),a.jsx("th",{className:"px-6 py-3 border-b",children:"Nama"}),a.jsx("th",{className:"px-6 py-3 border-b",children:"Email"}),a.jsx("th",{className:"px-6 py-3 border-b",children:"Phone"}),a.jsx("th",{className:"px-6 py-3 border-b",children:"Alamat"}),a.jsx("th",{className:"px-6 py-3 border-b",children:"Jabatan"}),a.jsx("th",{className:"px-6 py-3 border-b",children:"Tanggal Masuk"}),a.jsx("th",{className:"px-6 py-3 border-b text-center",children:"Aksi"})]})}),a.jsx("tbody",{children:C.map((e,t)=>a.jsxs("tr",{className:`hover:bg-gray-50 ${t%2===0?"bg-white":"bg-gray-50"}`,children:[a.jsx("td",{className:"px-6 py-3 border-b",children:a.jsx("img",{src:e.foto,alt:e.name,className:"w-10 h-10 rounded-full object-cover"})}),a.jsx("td",{className:"px-6 py-3 border-b",children:e.name}),a.jsx("td",{className:"px-6 py-3 border-b",children:e.email}),a.jsx("td",{className:"px-6 py-3 border-b",children:e.phone}),a.jsx("td",{className:"px-6 py-3 border-b",children:e.alamat}),a.jsx("td",{className:"px-6 py-3 border-b",children:e.jabatan}),a.jsx("td",{className:"px-6 py-3 border-b",children:f(e.tanggal_masuk).isValid()?f(e.tanggal_masuk).format("DD MMM YYYY"):"-"}),a.jsx("td",{className:"px-6 py-3 border-b text-center",children:a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>P(e.id),className:"hover:bg-orange-100 rounded-full p-2",children:a.jsx(F,{className:"text-orange-500 text-xl"})}),a.jsx(M,{to:`/karyawan/${e.id}`,className:"hover:bg-blue-100 rounded-full p-2",children:a.jsx(I,{className:"text-blue-500 text-xl"})}),a.jsx("button",{onClick:()=>S(e.id),className:"hover:bg-red-100 rounded-full p-2",children:a.jsx(A,{className:"text-red-500 text-xl"})})]})})]},e.id))})]}),!u&&d.length===0&&a.jsx(L,{text:"Belum ada data karyawan."})]}),a.jsx(B,{currentPage:y,totalPages:D,onPageChange:w,itemsPerPage:m,onPageSizeChange:v})]})]})}export{X as default};
